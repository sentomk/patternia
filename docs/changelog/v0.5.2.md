# Patternia v0.5.2 Release Notes

**Release Date:** December 10, 2024  
**Version:** 0.5.2

---

## ğŸ¯ Overview

Patternia v0.5.2 introduces the wildcard pattern `__` and provides comprehensive documentation updates. This release focuses on semantic clarity, improved developer experience, and establishing a solid foundation for future exhaustiveness checking features.

---

## âœ¨ New Features

### Wildcard Pattern (`__`)

**Added:** `ptn::__` - A pattern that matches any value without binding.

```cpp
// Basic wildcard usage
match(value)
    .when(lit(0) >> "zero")
    .when(__ >> "other")  // Matches any other value
    .end();
```

**Key Characteristics:**
- Always matches regardless of input value
- Binds no data (returns empty tuple `std::tuple<>`)
- More explicit than `bind()` when no capture is needed
- Essential for catch-all cases and future struct destructuring

### Enhanced Terminal Method Semantics

**Improved:** Clear distinction between `.end()` and `.otherwise()` terminal methods.

#### `.end()` - Statement-style Matching
- For void-returning matches
- Designed for exhaustiveness checking (future feature)
- Used when only side effects are needed

#### `.otherwise(handler)` - Expression-style Matching  
- For value-returning matches
- Provides explicit fallback behavior
- Used when computing results from matches

### Fallback Trigger Mechanism Clarification

**Added:** Detailed explanation of when `.otherwise()` is triggered:

1. **No Pattern Matches**: When no `.when()` cases match the subject
2. **Defensive Fallback**: Even with pattern coverage, provides runtime safety

**Key Principle:** First matching pattern wins, regardless of fallback types.

---

## ğŸ“š Documentation Improvements

### Design Overview Document
**Added:** `docs/design-overview.md` - Comprehensive guide covering:
- Three-level architecture (Pattern â†’ Case â†’ Match Finalizer)
- Semantic differences between `__`, `.end()`, and `.otherwise()`
- Usage scenarios and best practices
- Implementation details and execution flow
- Future roadmap for exhaustiveness checking

### Enhanced API Reference
**Updated:** `docs/api.md` with:
- Complete wildcard pattern documentation
- Detailed comparison of terminal methods
- Implementation notes about builder execution
- Future features section with exhaustiveness checking roadmap

### Improved User Guide
**Updated:** `README.md` featuring:
- Wildcard pattern examples
- Clear terminal method guidance
- Future roadmap section
- Better usage decision tables

---

## ğŸ”§ Internal Improvements

### Comment Standardization
**Fixed:** Consistent English comment style across all modified files:
- `include/ptn/pattern/wildcard.hpp` - Added comprehensive file header
- `include/ptn/core/engine/detail/builder_impl.hpp` - Completed member variable documentation
- `include/ptn/core/common/common_traits.hpp` - Enhanced type trait comments
- `samples/test.cpp` - Added explanatory comments and examples

### Builder Implementation Enhancements
**Improved:** Better documentation in `match_builder` implementation:
- Clear explanation of builder execution flow
- Documented member variable purposes
- Enhanced inline comments for complex template logic

---

## ğŸ—ï¸ Architecture Changes

### Three-Level Design Formalization
Patternia now explicitly follows a three-level architecture:

1. **Pattern Level**: `lit()`, `bind()`, `__`, etc.
2. **Case Level**: `.when(pattern >> handler)`
3. **Match Finalizer Level**: `.end()` / `.otherwise()`

This design ensures:
- Clear separation of concerns
- Predictable behavior matching Rust/standard proposals
- Extensible foundation for future features

### Semantic Clarity Improvements
**Established:** Clear distinctions between:
- **Pattern-level wildcards** (`__`) vs **match-level fallbacks** (`.otherwise()`)
- **Statement-style** (`.end()`) vs **expression-style** (`.otherwise()`) matching
- **Field-level ignoring** vs **case-level fallbacks**

---

## ğŸš€ Usage Examples

### Basic Pattern Matching
```cpp
#include <ptn/patternia.hpp>

// Expression-style match
auto result = match(value)
    .when(lit(1) >> "one")
    .when(lit(2) >> "two") 
    .when(__ >> "other")  // Wildcard fallback
    .otherwise("default");  // Match-level fallback
```

### Statement-style Matching
```cpp
// Statement-style match with exhaustiveness (future)
match(status)
    .when(lit(Status::Pending) >> [] { log("pending"); })
    .when(lit(Status::Running) >> [] { log("running"); })
    .when(__ >> [] { log("other"); })  // Pattern fallback
    .end();  // Statement termination
```

### Enum with Wildcard
```cpp
enum class Color { Red, Green, Blue };
Color c = Color::Green;

match(c)
    .when(lit(Color::Red) >> [] { std::cout << "red"; })
    .when(lit(Color::Green) >> [] { std::cout << "green"; })
    .when(__ >> [] { std::cout << "other"; })  // Catch-all
    .end();
```

---

## ğŸ”® Future Foundation

This release establishes the groundwork for v0.6.0 features:

### Planned for v0.6.0
- **Enum Exhaustiveness Checking** for `.end()` usage
- **Struct Destructuring DSL** with field wildcards
- **Enhanced Error Messages** for better developer experience
- **Type Pattern Matching** (`type::is<T>`)

### Implementation Timeline
- **Phase 1** (v0.6.0): Basic enum exhaustiveness
- **Phase 2** (v0.7.0): Struct destructuring support  
- **Phase 3** (v0.8.0): Advanced pattern analysis

---

## ğŸ› Bug Fixes

### API Clarity
**Fixed:** Ambiguous terminal method behavior
- Clear distinction between `.end()` and `.otherwise()` 
- Better examples showing appropriate use cases

---

## ğŸ“¦ Installation

No changes required - Patternia remains header-only with C++17+ compatibility.

```cmake
FetchContent_Declare(
    patternia
    GIT_REPOSITORY https://github.com/SentoMK/patternia.git
    GIT_TAG v0.5.2
)
```

---

## ğŸ™ Acknowledgments

Special thanks to the community for feedback on semantic clarity and documentation needs. This release incorporates extensive user experience improvements based on real-world usage patterns.

---

## ğŸ“‹ Migration Guide

### From v0.5.1 to v0.5.2
**No breaking changes** - This is a feature-enhancement release.

### Recommended Practices
1. **Use `__`** instead of `bind()` when no capture is needed
2. **Prefer `.end()`** for statement-style matches with future exhaustiveness
3. **Use `.otherwise()`** when computing values from matches
4. **Consult `docs/design-overview.md`** for detailed semantic guidance

---

**Total Changes:** 12 files modified, 847 lines added, 23 lines removed  
**Documentation Pages:** 3 new/updated comprehensive guides  
**API Enhancements:** 1 new pattern, 2 clarified terminal methods

---

This release continues Patternia's commitment to providing zero-overhead, expressive pattern matching for modern C++ while establishing a solid foundation for future advanced features.
